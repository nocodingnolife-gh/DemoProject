<script>
$(function fixCjkSpacing() {
    var $content = $('.ui-content');

    // Halfwidth and Fullwidth Forms    FF00–FFEF
    // CJK Symbols and Punctuation      3000–303F
    // CJK Unified Ideographs           4E00-9FFF
    var cjkRegex = /([\uFF00-\uFFEF]|[\u3000-\u303F]|[\u4E00-\u9FFF])(\r|\r?\n)(?!$)/g;

    $content.find('p, li').each(function() {
        var $t = $(this);
        $t.html($t.html().replace(cjkRegex, '$1'));
    });
});

$(function fieldDef() {
    var $hs = $('h1, h2, h3, h4, h5, h6');
    var $ps = $hs.next('p');
    $ps.each(function() {
        var $p = $(this);
        var $children = $p.children();
        var count = $children.length;
        var isAllCode = count > 0 && count === $children.filter('code').length;
        if (isAllCode)
            $p.wrap($('<div>').addClass('attr-def'));
    });
});
</script>
